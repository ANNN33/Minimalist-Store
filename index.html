<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="qHhHFioU0084o1SP09ra8VYgvHsqOKGF3FnOqUUEnjo" />
    
    <title>Minimalist Store & Cart</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --beige-bg: #fdfaf5; --accent: #c4a484; --text: #4a4a4a; }
        body { font-family: 'Montserrat', sans-serif; background: var(--beige-bg); color: var(--text); margin: 0; padding: 0; }
        
        header { background: white; padding: 15px; text-align: center; border-bottom: 1px solid #eee; sticky: top; z-index: 100; }
        .search-container { margin: 15px auto; max-width: 600px; padding: 0 20px; }
        #searchInput { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 25px; outline: none; box-sizing: border-box; }

        .nav-buttons { margin-bottom: 10px; }
        nav button { background: none; border: none; margin: 5px 10px; cursor: pointer; font-weight: 600; font-size: 11px; text-transform: uppercase; }
        
        .container { max-width: 1200px; margin: 20px auto; display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; padding: 0 20px; }
        .card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); }
        .card img { width: 100%; height: 320px; object-fit: cover; }
        .card-info { padding: 15px; text-align: center; }
        .price { font-weight: 600; font-size: 18px; margin-top: 5px; }

        /* –ö–æ—à–∏–∫ –∫–Ω–æ–ø–∫–∞ */
        .cart-icon { position: fixed; bottom: 20px; right: 20px; background: var(--accent); color: white; padding: 15px 20px; border-radius: 50px; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 999; }

        /* –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); justify-content: center; align-items: center; z-index: 1000; overflow-y: auto; }
        .modal-content { background: white; width: 90%; max-width: 500px; border-radius: 15px; padding: 25px; position: relative; margin: 20px; }
        .close { position: absolute; top: 15px; right: 20px; font-size: 25px; cursor: pointer; }
        
        #m-img { width: 100%; border-radius: 10px; margin-bottom: 15px; }
        .m-desc { font-size: 14px; color: #666; margin: 15px 0; line-height: 1.5; }
        
        select, input { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ddd; }
        .btn { background: var(--accent); color: white; border: none; padding: 12px; width: 100%; border-radius: 5px; cursor: pointer; font-weight: 600; text-transform: uppercase; }

        /* –°—Ç–∏–ª—å –∫–æ—à–∏–∫–∞ */
        .cart-item { display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 10px 0; }
    </style>
</head>
<body>

<header>
    <h1>Minimal Store</h1>
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤..." onkeyup="searchProducts()">
    </div>
    <div class="nav-buttons">
        <button onclick="renderProducts(allProducts)">–í—Å—ñ</button>
        <button onclick="filterItems('–ñ—ñ–Ω–æ—á–∏–π –æ–¥—è–≥')">–ñ—ñ–Ω–æ—á–∏–π</button>
        <button onclick="filterItems('–ß–æ–ª–æ–≤—ñ—á–∏–π –æ–¥—è–≥')">–ß–æ–ª–æ–≤—ñ—á–∏–π</button>
    </div>
</header>

<div class="container" id="grid">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>

<div class="cart-icon" onclick="openCart()">üõí –ö–æ—à–∏–∫ (<span id="cartCount">0</span>)</div>

<div id="productModal" class="modal" onclick="if(event.target==this) closeModal('productModal')">
    <div class="modal-content">
        <span class="close" onclick="closeModal('productModal')">&times;</span>
        <img id="m-img" src="">
        <h2 id="m-name"></h2>
        <div class="price" id="m-price"></div>
        <div class="m-desc" id="m-desc"></div>
        <label>–û–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä:</label>
        <select id="m-size"></select>
        <button class="btn" onclick="addToCart()">–î–æ–¥–∞—Ç–∏ —É –∫–æ—à–∏–∫</button>
    </div>
</div>

<div id="cartModal" class="modal" onclick="if(event.target==this) closeModal('cartModal')">
    <div class="modal-content">
        <span class="close" onclick="closeModal('cartModal')">&times;</span>
        <h2>–í–∞—à –∫–æ—à–∏–∫</h2>
        <div id="cartItems"></div>
        <hr>
        <h3>–†–∞–∑–æ–º: <span id="cartTotal">0</span> –≥—Ä–Ω</h3>
        <input type="tel" id="userPhone" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É">
        <button class="btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
    </div>
</div>

<script>
    const API = 'https://script.google.com/macros/s/AKfycbwYwq2xdyMS_kx5rkKv2MUA8Fsh8n52MaS20mPlkmJYlmPbEXs5ZWkK0ZyGCDSMkorS/exec';
    let allProducts = [];
    let cart = [];
    let currentProduct = null;

    async function load() {
        try {
            const r = await fetch(API);
            const data = await r.json();
            allProducts = data.filter(i => i.Name || i.name || i['–ù–∞–∑–≤–∞']);
            renderProducts(allProducts);
        } catch (e) {
            document.getElementById('grid').innerText = "–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.";
        }
    }

    function renderProducts(items) {
        const grid = document.getElementById('grid');
        grid.innerHTML = items.map((i, index) => {
            const name = i.Name || i.name || i['–ù–∞–∑–≤–∞'] || "–¢–æ–≤–∞—Ä";
            const price = i.Price || i.price || i['–¶—ñ–Ω–∞'] || "0";
            const img = i.ImageURL || i.image || i['–§–æ—Ç–æ'] || "";
            const desc = i.Description || i.description || i['–û–ø–∏—Å'] || "";
            const sizes = i.Sizes || i.size || i['–†–æ–∑–º—ñ—Ä–∏'] || "–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π";

            return `
                <div class="card" onclick="openProduct('${encodeURIComponent(JSON.stringify(i))}')">
                    <img src="${img}" alt="${name}">
                    <div class="card-info">
                        <h3>${name}</h3>
                        <div class="price">${price} –≥—Ä–Ω</div>
                    </div>
                </div>
            `;
        }).join('');
    }

    function openProduct(encodedData) {
        const product = JSON.parse(decodeURIComponent(encodedData));
        currentProduct = product;
        
        document.getElementById('m-name').innerText = product.Name || product.name || product['–ù–∞–∑–≤–∞'];
        document.getElementById('m-price').innerText = (product.Price || product.price || product['–¶—ñ–Ω–∞']) + " –≥—Ä–Ω";
        document.getElementById('m-img').src = product.ImageURL || product.image || product['–§–æ—Ç–æ'];
        
        // –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –æ–ø–∏—Å—É –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤
        const descText = product.Description || product.description || product['–û–ø–∏—Å'] || "–û–ø–∏—Å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π";
        document.getElementById('m-desc').innerHTML = descText.replace(/\n/g, '<br>');

        const sizeSelect = document.getElementById('m-size');
        const sizes = (product.Sizes || product.size || product['–†–æ–∑–º—ñ—Ä–∏'] || "–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π").split(',');
        sizeSelect.innerHTML = sizes.map(s => `<option value="${s.trim()}">${s.trim()}</option>`).join('');

        document.getElementById('productModal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    function searchProducts() {
        const term = document.getElementById('searchInput').value.toLowerCase();
        const filtered = allProducts.filter(p => 
            (p.Name || p.name || p['–ù–∞–∑–≤–∞'] || "").toLowerCase().includes(term)
        );
        renderProducts(filtered);
    }

    function filterItems(cat) {
        const filtered = allProducts.filter(p => (p.Category || p['–ö–∞—Ç–µ–≥–æ—Ä—ñ—è'] || "").trim() === cat);
        renderProducts(filtered);
    }

    function addToCart() {
        const size = document.getElementById('m-size').value;
        cart.push({ ...currentProduct, selectedSize: size });
        updateCartCount();
        closeModal('productModal');
        alert("–î–æ–¥–∞–Ω–æ –≤ –∫–æ—à–∏–∫!");
    }

    function updateCartCount() {
        document.getElementById('cartCount').innerText = cart.length;
    }

    function openCart() {
        const list = document.getElementById('cartItems');
        let total = 0;
        list.innerHTML = cart.map((item, idx) => {
            const p = item.Price || item.price || item['–¶—ñ–Ω–∞'] || 0;
            total += parseInt(p);
            return `
                <div class="cart-item">
                    <span>${item.Name || item.name} (${item.selectedSize})</span>
                    <span>${p} –≥—Ä–Ω <button onclick="removeFromCart(${idx})" style="color:red; background:none; border:none; cursor:pointer;">‚úï</button></span>
                </div>
            `;
        }).join('');
        document.getElementById('cartTotal').innerText = total;
        document.getElementById('cartModal').style.display = 'flex';
    }

    function removeFromCart(idx) {
        cart.splice(idx, 1);
        updateCartCount();
        openCart();
    }

    function closeModal(id) {
        document.getElementById(id).style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    function checkout() {
        const phone = document.getElementById('userPhone').value;
        if (phone.length < 10) return alert("–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä!");
        
        const itemsList = cart.map(i => `${i.Name || i.name} (${i.selectedSize})`).join(', ');
        alert(`–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ!\n–¢–æ–≤–∞—Ä–∏: ${itemsList}\n–ú–∏ –∑–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É—î–º–æ –≤–∞–º –Ω–∞ ${phone}`);
        cart = [];
        updateCartCount();
        closeModal('cartModal');
    }

    window.onload = load;
</script>
</body>
</html>


