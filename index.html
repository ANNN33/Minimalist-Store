<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="qHhHFioU0084o1SP09ra8VYgvHsqOKGF3FnOqUUEnjo" />
    
    <title>Minimalist Store - All Devices</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --beige-bg: #fdfaf5; --accent: #c4a484; --text: #4a4a4a; --white: #ffffff; }
        
        body { font-family: 'Montserrat', sans-serif; background: var(--beige-bg); color: var(--text); margin: 0; padding: 0; }
        
        /* –®–∞–ø–∫–∞ —Å–∞–π—Ç—É */
        header { 
            background: var(--white); 
            padding: 15px 10px; 
            text-align: center; 
            border-bottom: 1px solid #eee; 
            position: sticky; 
            top: 0; 
            z-index: 100; 
        }

        h1 { margin: 0 0 15px 0; font-size: 24px; font-weight: 300; letter-spacing: 2px; }

        /* –ü–æ—à—É–∫ */
        .search-bar { max-width: 500px; margin: 0 auto 15px; padding: 0 15px; }
        #searchInput { 
            width: 100%; 
            padding: 10px 20px; 
            border: 1px solid #ddd; 
            border-radius: 25px; 
            font-family: inherit;
            outline: none;
        }

        /* –ù–∞–≤—ñ–≥–∞—Ü—ñ—è */
        nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 5px; }
        nav button { 
            background: none; 
            border: 1px solid transparent; 
            padding: 8px 12px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 11px; 
            text-transform: uppercase; 
            transition: 0.3s;
        }
        nav button:hover { color: var(--accent); }
        .btn-sale { color: #b22222; }

        /* –°—ñ—Ç–∫–∞ —Ç–æ–≤–∞—Ä—ñ–≤ */
        .container { 
            max-width: 1200px; 
            margin: 20px auto; 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
            gap: 15px; 
            padding: 0 15px; 
        }
        @media (min-width: 768px) { .container { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px; } }

        .card { background: var(--white); border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); cursor: pointer; }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        @media (min-width: 768px) { .card img { height: 350px; } }
        
        .card-info { padding: 12px; text-align: center; }
        .card-info h3 { margin: 0; font-size: 14px; font-weight: 400; height: 40px; overflow: hidden; }
        .price { font-weight: 600; font-size: 16px; color: var(--accent); margin-top: 8px; }

        /* –ö–Ω–æ–ø–∫–∞ –∫–æ—à–∏–∫–∞ */
        .cart-float { 
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            background: var(--accent); 
            color: white; 
            padding: 15px 25px; 
            border-radius: 50px; 
            cursor: pointer; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
            z-index: 99;
            font-weight: 600;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ */
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%; 
            background: rgba(0,0,0,0.6); 
            z-index: 1000; 
            justify-content: center; 
            align-items: center; 
        }
        .modal-content { 
            background: white; 
            width: 90%; 
            max-width: 450px; 
            max-height: 90vh; 
            overflow-y: auto; 
            border-radius: 15px; 
            padding: 20px; 
            position: relative; 
        }
        .close { position: absolute; top: 10px; right: 15px; font-size: 28px; cursor: pointer; }
        
        #m-img { width: 100%; border-radius: 8px; object-fit: cover; margin-bottom: 15px; }
        .m-desc { font-size: 14px; line-height: 1.6; color: #555; margin: 15px 0; border-top: 1px solid #eee; padding-top: 15px; }
        
        label { display: block; margin: 10px 0 5px; font-size: 12px; font-weight: 600; text-transform: uppercase; }
        select, input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        
        .btn-action { 
            background: var(--accent); 
            color: white; 
            border: none; 
            width: 100%; 
            padding: 15px; 
            border-radius: 8px; 
            font-weight: 600; 
            cursor: pointer; 
            text-transform: uppercase; 
        }

        /* –ö–æ—à–∏–∫ –¥–µ—Ç–∞–ª—ñ */
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; font-size: 14px; }
        .remove-btn { color: #ff4d4d; border: none; background: none; cursor: pointer; font-size: 18px; }
    </style>
</head>
<body>

<header>
    <h1>MINIMAL STORE</h1>
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="–®—É–∫–∞—Ç–∏ —Ç–æ–≤–∞—Ä..." onkeyup="search()">
    </div>
    <nav>
        <button onclick="render(allData)">–í—Å—ñ</button>
        <button onclick="filter('–ö—Ä–æ—Å—ñ–≤–∫–∏')">–ö—Ä–æ—Å—ñ–≤–∫–∏</button>
        <button onclick="filter('–ñ—ñ–Ω–æ—á–∏–π –æ–¥—è–≥')">–ñ—ñ–Ω–æ—á–∏–π –æ–¥—è–≥</button>
        <button onclick="filter('–ß–æ–ª–æ–≤—ñ—á–∏–π –æ–¥—è–≥')">–ß–æ–ª–æ–≤—ñ—á–∏–π –æ–¥—è–≥</button>
        <button onclick="filter('–ó–Ω–∏–∂–∫–∞')" class="btn-sale">–ó–Ω–∏–∂–∫–∏ %</button>
    </nav>
</header>

<div class="container" id="grid">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>

<div class="cart-float" onclick="showCart()">
    üõí –ö–æ—à–∏–∫ (<span id="count">0</span>)
</div>

<div id="pModal" class="modal" onclick="if(event.target==this) hideModal('pModal')">
    <div class="modal-content">
        <span class="close" onclick="hideModal('pModal')">&times;</span>
        <img id="m-img" src="">
        <h2 id="m-title" style="margin:0; font-size: 20px;"></h2>
        <div class="price" id="m-price" style="font-size: 22px; margin: 10px 0;"></div>
        <div id="m-desc" class="m-desc"></div>
        
        <label>–†–æ–∑–º—ñ—Ä:</label>
        <select id="m-size"></select>
        
        <button class="btn-action" onclick="addToCart()">–î–æ–¥–∞—Ç–∏ —É –∫–æ—à–∏–∫</button>
    </div>
</div>

<div id="cModal" class="modal" onclick="if(event.target==this) hideModal('cModal')">
    <div class="modal-content">
        <span class="close" onclick="hideModal('cModal')">&times;</span>
        <h2 style="text-align: center;">–í–∞—à –∫–æ—à–∏–∫</h2>
        <div id="cartList"></div>
        <div style="margin: 20px 0; text-align: right; font-weight: 600; font-size: 18px;">
            –†–∞–∑–æ–º: <span id="total">0</span> –≥—Ä–Ω
        </div>
        
        <label>–°–ø–æ—Å—ñ–± –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
        <select id="delivery">
            <option value="–ù–æ–≤–∞ –ü–æ—à—Ç–∞">–ù–æ–≤–∞ –ü–æ—à—Ç–∞</option>
            <option value="–£–∫—Ä–ø–æ—à—Ç–∞">–£–∫—Ä–ø–æ—à—Ç–∞</option>
            <option value="–°–∞–º–æ–≤–∏–≤—ñ–∑">–°–∞–º–æ–≤–∏–≤—ñ–∑</option>
        </select>
        
        <label>–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É:</label>
        <input type="tel" id="phone" placeholder="+380 00 000 00 00">
        
        <button class="btn-action" onclick="sendOrder()">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
    </div>
</div>

<script>
    const API = 'https://script.google.com/macros/s/AKfycbwYwq2xdyMS_kx5rkKv2MUA8Fsh8n52MaS20mPlkmJYlmPbEXs5ZWkK0ZyGCDSMkorS/exec';
    let allData = [];
    let cart = [];
    let activeProduct = null;

    async function loadData() {
        try {
            const response = await fetch(API);
            allData = await response.json();
            render(allData);
        } catch (e) {
            document.getElementById('grid').innerHTML = "–ü–æ–º–∏–ª–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ —Ç–∞–±–ª–∏—Ü–µ„ÇíÈñã–∫—É.";
        }
    }

    function render(items) {
        const grid = document.getElementById('grid');
        grid.innerHTML = items.map((item, index) => {
            if(!item.Name && !item.name) return '';
            const title = item.Name || item.name;
            const price = item.Price || item.price || 0;
            const img = item.ImageURL || item.image || '';
            return `
                <div class="card" onclick="viewProduct(${index})">
                    <img src="${img}" onerror="this.src='https://via.placeholder.com/300x400?text=–§–æ—Ç–æ+–≤—ñ–¥—Å—É—Ç–Ω—î'">
                    <div class="card-info">
                        <h3>${title}</h3>
                        <div class="price">${price} –≥—Ä–Ω</div>
                    </div>
                </div>
            `;
        }).join('');
    }

    function viewProduct(index) {
        const p = allData[index];
        activeProduct = p;
        
        document.getElementById('m-title').innerText = p.Name || p.name;
        document.getElementById('m-price').innerText = (p.Price || p.price) + " –≥—Ä–Ω";
        document.getElementById('m-img').src = p.ImageURL || p.image;
        document.getElementById('m-desc').innerHTML = (p.Description || p.description || "–û–ø–∏—Å –¥–æ–¥–∞—î—Ç—å—Å—è...").replace(/\n/g, '<br>');
        
        const sizeSelect = document.getElementById('m-size');
        const sizes = (p.Sizes || p.size || "–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π").split(',');
        sizeSelect.innerHTML = sizes.map(s => `<option value="${s.trim()}">${s.trim()}</option>`).join('');
        
        document.getElementById('pModal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    function search() {
        const query = document.getElementById('searchInput').value.toLowerCase();
        const filtered = allData.filter(p => (p.Name || p.name || "").toLowerCase().includes(query));
        render(filtered);
    }

    function filter(cat) {
        const filtered = allData.filter(p => (p.Category || p.category || "").includes(cat));
        render(filtered);
    }

    function addToCart() {
        const size = document.getElementById('m-size').value;
        cart.push({ ...activeProduct, selectedSize: size });
        document.getElementById('count').innerText = cart.length;
        hideModal('pModal');
        alert("–¢–æ–≤–∞—Ä —É –∫–æ—à–∏–∫—É!");
    }

    function showCart() {
        const list = document.getElementById('cartList');
        let total = 0;
        list.innerHTML = cart.map((item, idx) => {
            const p = parseInt(item.Price || item.price || 0);
            total += p;
            return `
                <div class="cart-item">
                    <div>
                        <b>${item.Name || item.name}</b><br>
                        <small>–†–æ–∑–º—ñ—Ä: ${item.selectedSize}</small>
                    </div>
                    <div>
                        <span>${p} –≥—Ä–Ω</span>
                        <button class="remove-btn" onclick="removeFromCart(${idx})">&times;</button>
                    </div>
                </div>
            `;
        }).join('');
        if(cart.length === 0) list.innerHTML = "<p style='text-align:center'>–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</p>";
        document.getElementById('total').innerText = total;
        document.getElementById('cModal').style.display = 'flex';
    }

    function removeFromCart(idx) {
        cart.splice(idx, 1);
        document.getElementById('count').innerText = cart.length;
        showCart();
    }

    function hideModal(id) {
        document.getElementById(id).style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    function sendOrder() {
        const phone = document.getElementById('phone').value;
        const delivery = document.getElementById('delivery').value;
        if(cart.length === 0) return alert("–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!");
        if(phone.length < 10) return alert("–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω!");

        const details = cart.map(i => `${i.Name || i.name} (–†–æ–∑–º—ñ—Ä: ${i.selectedSize})`).join('\n');
        alert(`–î—è–∫—É—î–º–æ! –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ.\n\n–¢–æ–≤–∞—Ä–∏:\n${details}\n\n–î–æ—Å—Ç–∞–≤–∫–∞: ${delivery}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`);
        
        cart = [];
        document.getElementById('count').innerText = "0";
        hideModal('cModal');
    }

    window.onload = loadData;
</script>
</body>
</html>


